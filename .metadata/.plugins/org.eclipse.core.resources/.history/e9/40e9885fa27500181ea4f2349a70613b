<?xml version="1.0" encoding="UTF-8"?>
<proxy name="EchoUTBasicProxy" startOnLoad="true" transports="https http" xmlns="http://ws.apache.org/ns/synapse">
    <target>
        <inSequence>
            <log description="Log" level="custom" separator=",">
                <property name="Proxy" value="EchoUTWithBasicAuthProxy"/>
            </log>
            <property name="user_name" scope="default" type="STRING" value="bob"/>
            <property expression="fn:concat('Basic ', base64Encode(fn:concat(get-property('user_name'),':','bobpass')))" name="Authorization" scope="transport" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/>
            <log level="custom">
                <property expression="$trp:Authorization" name="Generated Authorization token"/>
            </log>
            <send>
                <endpoint>
                    <address uri="https://localhost:9443/services/echo"/>
                </endpoint>
            </send>
        </inSequence>
        <outSequence>
            <log level="full"/>
            <header action="remove" name="wsse:Security" scope="default" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"/>
            <send/>
        </outSequence>
        <faultSequence/>
    </target>
    <publishWSDL preservePolicy="true" uri="http://localhost:9763/services/echo?wsdl"/>
</proxy>
